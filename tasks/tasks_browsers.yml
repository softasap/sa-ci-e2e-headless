---
  - name: Browsers | Install packages required by browsers
    apt: pkg="{{item}}" state="present"
    with_items:
      - "x11-xkb-utils"
      - "xfonts-100dpi"
      - "xfonts-75dpi"
      - "xfonts-scalable"
      - "xserver-xorg-core"
      - "libfontconfig1-dev"
    become: yes
    tags:
      - browsers

  - name: Browsers | Install firefox browser
    apt: pkg="{{item}}" state="present"
    with_items:
      - "firefox"
    when: browser_firefox
    become: yes
    tags:
      - browsers

  - name: Browsers | Install chromium browser
    apt: pkg="{{item}}" state="present"
    with_items:
      - "chromium-browser"
    when: browser_chromium
    become: yes
    tags:
      - browsers

  - name: Browsers | Install phantomjs
    npm: name=phantomjs state=present global=yes executable="{{npm_path_detected}}/npm"
    when: browser_phantomjs
    become: "{{npm_is_global}}"
    environment:
      PATH: "{{npm_path_detected}}:{{ ansible_env.PATH }}"
    tags:
      - browsers

  - include: tasks_google_chrome.yml
    when: browser_google_chrome

  - name: Browsers | Install chromedriver
    npm: name=chromedriver state=present global=yes executable="{{npm_path_detected}}/npm"
    become: "{{npm_is_global}}"
    environment:
      PATH: "{{npm_path_detected}}:{{ ansible_env.PATH }}"
    tags:
      - browsers
